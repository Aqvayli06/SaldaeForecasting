source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/fcast_summary_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
target_variables <- c("pop","pce")
library('tidyverse')
training_data <- economics
asurif_zdat <- 30
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/time_aggregator_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/time_aggregator_module.R')
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], target_variable = .x,asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], target_variable = .x,asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
target_variables
purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], target_variable = .x,asurif_zdat = asurif_arzdat))
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
tisefka <- economics
target_variable <- "pop"
dplyr::pull(tisefka,!!target_variable)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], target_variable = .x,asurif_zdat = asurif_arzdat))%>%
stats::setNames(target_variables)
training_data
.x <- "pop"
tisefka = training_data[,c("date",.x)]
target_variable = .x
asurif_arzdat
asurif_zdat = 10
ukud_unit <- detect_date_auto(
time_vect = tisefka$date,
n_new_dates = NULL
)
prophet_object <- prophet_fit(tisefka = tisefka, sald_holidays = sald_holidays)
tisefka
# ..........Prepare data as required by the package .
history <- data.frame(
ds = prophet:::set_date(tisefka$date, tz = "CET"),
y = dplyr::pull(tisefka,!!target_variable)
)
history
# .............................. model fitting step...........
prophet_object <- prophet::prophet(df = history, fit = TRUE, holidays = sald_holidays)
sald_holidays <- NULL
# .............................. model fitting step...........
prophet_object <- prophet::prophet(df = history, fit = TRUE, holidays = sald_holidays)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
SA_fcast_object <- purrr::map(.x = target_variables,~Saldae_prophet(tisefka = training_data[,c("date",.x)], target_variable = .x,asurif_zdat = asurif_zdat))%>%
stats::setNames(target_variables)
SA_fcast_object$pop
SA_fcast_object$pop$method
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
tisefka <- economics
tisefka <- purrr::map_df(.x= tisefka,.f = interp_na_value, interp_mode = "spline")
tisefka <- purrr::map_df(.x= tisefka,~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
tisefka
anomaly_output <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
anomaly_output <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
target_ts <- c("pop","pce")
anomaly_output <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
anomaly_output$pop
anomaly_output <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
anomaly_output$pop
target_ts
tisefka
purrr::map(.x = target_ts,tisefka~[,c("date",.x)])
a <- purrr::map(.x = target_ts,~tisefka[,c("date",.x)])
a[[1]]
tisefka$pce[2:3] <- NA
tisefka$pce[20:30] <- NA
View(tisefka)
#. Missing values interpolation
tisefka <- purrr::map_df(.x= tisefka,~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
View(tisefka)
?SaldaeDataExplorer::anomaly_detection_nnegh
View(SaldaeDataExplorer::anomaly_detection_nnegh)
View(anomaly_detection_yiwen)
a[[]]
a[[1]]
tisefka <- a[[1]]
target_variable <- colnames(tisefka)[colnames(tisefka)!="date"]
target_variable
tisefka_tazedgant <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
"Yes" %in% tisefka_tazedgant$anomaly
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- purrr::imap(.x = 1:nrow(tisefka_tazedgant), ~ base::ifelse(tisefka_tazedgant$anomaly[.x] == "Yes", tisefka_tazedgant$observed[.x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = as.numeric(Anomalies))
}
tisefka
?anomalize:clean_anomalies
?anomalize::clean_anomalies
tisefka_tazedgant <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)%>%
anomalize::clean_anomalies()
tisefka_tazedgant
tisefka_tazedgant$observed_cleaned
tisefka_tazedgant <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)%>%
anomalize::clean_anomalies()
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- purrr::imap(.x = 1:nrow(tisefka_tazedgant), ~ base::ifelse(tisefka_tazedgant$anomaly[.x] == "Yes", tisefka_tazedgant$observed[.x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = as.numeric(Anomalies),Corrected = tisefka_tazedgant$observed_cleaned)
}
tisefka
matplot(tisefka[,-1],type="l")
library(tidyverse)
tisefka <- economics
#. Missing values interpolation
tisefka <- purrr::map_df(.x= tisefka,~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
a <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
target_ts <- c("pop","pce")
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
a <-  SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
a$pop
View(a$pop)
tisefka <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
original_data <- tisefka[,2]
tisefka <- tisefka$pop
tisefka[,2]
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
original_data <- colnames(tisefka)[2]
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
original_data
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
original_variable <- colnames(tisefka)[2]
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
original_variable <- colnames(tisefka)[2]
training_variable <- base::ifelse("Corrected"%in%colnames(tisefka),"Corrected",original_variable)
training_variable
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
prophet_object <- prophet_fit(tisefka = tisefka,target_variable = training_variable ,sald_holidays = sald_holidays)
sald_holidays <- NULL
prophet_object <- prophet_fit(tisefka = tisefka,target_variable = training_variable ,sald_holidays = sald_holidays)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
asurif_zdat<- 30
prophet_output <- prophet_forecast_f(prophet_object = prophet_object, ukud_unit = ukud_unit, asurif_zdat = asurif_zdat)
ukud_unit <- detect_date_auto(
time_vect = tisefka$date,
n_new_dates = NULL
)
ukud_unit <- SaldaeDataExplorer::detect_date_auto(
time_vect = tisefka$date,
n_new_dates = NULL
)
ukud_unit
prophet_output <- prophet_forecast_f(prophet_object = prophet_object, ukud_unit = ukud_unit, asurif_zdat = asurif_zdat)
plot(prophet_output)
prophet_output$ts_original <-tisefka[,original_variable]
prophet_output$ts_original
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
SA_fcast_object <- purrr::map(.x = tisefka_list,~Saldae_prophet(tisefka = .x,asurif_zdat = asurif_zdat))%>%
stats::setNames(target_variables)
tisefka <- economics
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
tisefka <- purrr::map_df(.x= tisefka,~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
tisefka <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
#. generate forecast
Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
#. generate forecast
Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
#. generate forecast
a <- Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
tisefka$pop
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
tisefka <- economics
target_ts <-c("pop","pce")
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
target_variables <- c("pop","pce")
#. Missing values interpolation
tisefka[,target_variables] <- purrr::map_df(.x= tisefka[,target_variables],~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
anomaly_detection<-TRUE
#. outliers correction
if (anomaly_detection == TRUE) {
tisefka <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_variables)
}else{
tisefka <- purrr::map(.x = target_ts,~tisefka[,c("date",.x)])
}
#. generate forecast
a <- Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
#. generate forecast
a <- Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
plot(a$pop)
plot(a$pce)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
tisefka <- economics
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
tisefka <- economics
#. Missing values interpolation
tisefka[,target_variables] <- purrr::map_df(.x= tisefka[,target_variables],~SaldaeDataExplorer::interp_na_value(ts_x = .x, interp_mode = "spline"))
#. outliers correction
if (anomaly_detection == TRUE) {
tisefka <- SaldaeDataExplorer::anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_variables)
}else{
tisefka <- purrr::map(.x = target_ts,~tisefka[,c("date",.x)])
}
#. generate forecast
if(Saldae_model =="saldae_prophet"){
tisefka <- Saldae_prophet_multiple(tisefka_list = tisefka,sald_holidays = NULL, asurif_zdat = 10)
}
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
a <-  Saldae_Forecaster(tisefka = economics,anomaly_detection = TRUE)
tisefka = economics
anomaly_detection = TRUE
asurif_arzdat <- min(floor(nrow(tisefka) / 4), 1000)
a <-  Saldae_Forecaster(tisefka = economics,target_variables = c("pop","pce"),anomaly_detection = TRUE)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
a$pop
plot(a$pop)
fcast_object <- a$pop
fcast_date <- as.POSIXct(c(rownames(fcast_object$raw_ts), names(fcast_object$mean)))
fcast_date
fcast_object$corrected
fcast_object$ts_original
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/prophet_model_v01.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/Saldae_forecasting_pool.R')
a$pop$ts_original
fcast_object<-a$pop
fcast_object$ts_original$date
fcast_date <- as.POSIXct(c(fcast_object$ts_original$date, names(fcast_object$mean)),tz ="CET")
names(fcast_object$mean)
c(fcast_object$ts_original$date, names(fcast_object$mean)
)
c(as.POSIXct(fcast_object$ts_original$date,tz= TimeZone), names(fcast_object$mean))
class(names(fcast_object$mean))
c(as.character(fcast_object$ts_original$date)
, names(fcast_object$mean))
fcast_date <- as.POSIXct(c(as.character(fcast_object$ts_original$date), names(fcast_object$mean)),tz =TimeZone)
TimeZone<-"CET"
fcast_date <- as.POSIXct(c(as.character(fcast_object$ts_original$date), names(fcast_object$mean)),tz =TimeZone)
fcast_date
actuals <- c(fcast_object$ts_original[,2], rep(NA, times = length(fcast_object$mean)))
actuals
dplyr::pull(fcast_object$ts_original,2)
c(dplyr::pull(fcast_object$ts_original,2), rep(NA, times = length(fcast_object$mean)))
forecast <- c(rep(NA, times =nrow(fcast_object$ts_original)), fcast_object$mean)
forecast
fcast_date <- as.POSIXct(c(as.character(fcast_object$ts_original$date), names(fcast_object$mean)),tz =TimeZone)
corrected <- c(fcast_object$x, rep(NA, times = length(fcast_object$mean)))
actuals <- c(dplyr::pull(fcast_object$ts_original,2), rep(NA, times = length(fcast_object$mean)))
forecast <- c(rep(NA, times =nrow(fcast_object$ts_original)), fcast_object$mean)
ufella <- c(rep(NA, times = nrow(fcast_object$ts_original)), fcast_object$upper)
adda <- c(rep(NA, times =nrow(fcast_object$ts_original)), fcast_object$lower)
fcast_df <- data.frame(date = fcast_date, actuals = actuals, corrected = corrected, forecast = forecast, upper = ufella, lower = adda)
fcast_df <- fcast_df[, c("date", "actuals", "corrected", "forecast", "upper", "lower")]
View(fcast_df)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/fcast_summary_module.R')
fcast_df <- dplyr::bind_cols(date = fcast_date, actuals = actuals, corrected = corrected, forecast = forecast, upper = ufella, lower = adda)
fcast_df <- fcast_df[, c("date", "actuals", "corrected", "forecast", "upper", "lower")]
fcast_df
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/fcast_summary_module.R')
b <- a%>%purrr::map(sbed_forecast_aqerru)
a$pop
b$pop
b$pce
cc <- b%>%purrr::map(sekned_forecast_aqeru)
cc$pop
cc$pce
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/fcast_summary_module.R')
devtools::load_all(".")
devtools::load_all(".")
library(SaldaeForecasting)
source('~/Saldae_Analytics/SaldaePackages/SaldaeForecasting/R/fcast_summary_module.R')
library(SaldaeForecasting)
library(SaldaeForecasting)
